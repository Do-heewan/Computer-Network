# 네트워크 계층 : Control Plane

<br>

## 제어 평면의 두 가지 접근법

### Per Router Control Plane
- 각 라우터가 개별적으로 라우팅 알고리즘을 실행

### SDN 제어 평면
- 원격 컨트롤러가 포워딩 테이블을 계산하고 설치

<br>

## 라우팅 프로토콜

### 라우팅의 목표
- 송신 호스트에서 수신 호스트까지의 "좋은"경로 결정
- 좋은 경로의 기준 : 최소 비용, 최고 속도, 최소 혼잡

### 그래프 추상화
- 그래프 G = (N, E)
- N : 라우터 집합
- E : 링크 집합
- c(a, b) : 노드 a와 b를 연결하는 직접 링크의 비용

### 라우팅 알고리즘 분류
1. 정보 범위
    - 전역적 (Global) : 모든 라우터가 완전한 토폴로지 정보 공유 -> Link State Algotithm
    - 분산적 (Decentralized) : 이웃과의 정보 교환을 통한 반복적 계산 -> Distance Vector Algorithm

2. 변화 속도
    - 정적 (static) : 경로가 천천히 변화
    - 동적 (dynamic) : 경로가 빠르게 변화

<br>

## Dijkstra's Link State Algorithm

### 특징
- Centralized(중앙 집중식) : 모든 노드가 네트워크 토폴로지와 링크 비용 정보 보유
- iterative(반복적) : k번 반복 후 k개 목적지까지의 최소 비용 경로 계산
- 각 노드에 대한 포워딩 테이블 생성

### 알고리즘 복잡도
- 계산 복잡도 : $O(n^2)$ - 더 효율적인 구현으로 $O(n logn)$ 가능
- 메세지 복잡도 : $O(n^2)$ - 각 라우터가 링크 상태 정보를 다른 모든 라우터에 브로드캐스트

### 문제점
- 진동 현상 : 링크 비용이 트래픽 양에 의존할 때 경로 진동 발생 가능

<br>

## Distance Vector Algorithm

### 기본 원리

- Bellman-Ford 방정식 기반
$$Dx(y) = minv { cx,v + Dv(y) }$$
- 각 노드가 주기적으로 자신의 거리 벡터 추정치를 이웃에게 전송

### 특징
- 반복적, 비동기적 : 로컬 링크 비용 변화나 이웃으로부터의 DV 업데이트 메세지에 의해 트리거
- 분산적, 자동 종료 : DV가 변경될 때만 이웃에게 알림

### 문제점
1. 좋은 소식은 빨리 전파 : 링크 비용 감소 시 빠른 수렴
2. 나쁜 소식은 천천히 전파 : 링크 비용 증가 시 count-to-infinity 문제 발생

<br>

## LS vs DV 알고리즘 비교

|측면|링크 상태 (LS)|거리 벡터 (DV)|
|-----|------|------|
|메시지 복잡도|O(n²) 메시지|이웃 간 교환, 수렴 시간 가변
|수렴 속도|O(n²) 알고리즘, 진동 가능|가변, 루프 및 count-to-infinity 문제|
|견고성|각 라우터가 자신의 테이블만 계산|오류가 네트워크 전체로 전파 가능|