# Multimedia Audio

<br>

## 기본 개념

### 아날로그 신호의 디지털 변환 과정
- 일정한 속도로 샘플링
- 각 샘플을 양자화하여 디지털 값으로 변환
- 양자화 과정에서 오차 발생

### 주요 비트레이트
- CD : 1411Mbps
- MP3 : 96 ~ 160Kbps
- 인터넷 전화 : 5.3Kbps

<br>

## VoIP 특성

### 지연 요구사항
- 150ms 미만 : 양호
- 400ms 초과 : 나쁨 (대화형 통신에 지장)

### VoIP 특성
- 대화 중 말하는 구간과 침묵 구간이 교대로 발생
- 말하는 구간에서만 64Kbps로 패킷 생성
- 20ms 단위로 160바이트 데이터 청크 생성

<br>

## 패킷 손실과 지연 문제

### 손실 유형
- 네트워크 손실 : 라우터 버퍼 오버플로우로 인한 패킷 손실
- 지연 손실 : 패킷이 재생 시점에 늦게 도착하여 발생하는 손실

**지연 지터(Jitter)** : 연속된 패킷들의 도착 시간 차이가 일정하지 않은 현상

<br>

## 플레이아웃 지연 관리

### 고정 플레이아웃 지연
- 모든 청크를 생성 시점에서 q ms 이후에 재생
- q가 클수록 패킷 손실 감소, 작을수록 대화형 경험 향상

### 적응형 플레이아웃 지연
- 네트워크 지연을 추정하여 각 대화 구간 시작 시 플레이아웃 지연 조정
- EWMA(지수가중이동평균)를 사용한 지연 추정

<br>

## 패킷 손실 복구 기법
### 순방향 오류 정정(FEC)
- 단순 FEC : n개 청크마다 XOR로 여분 청크 생성
- 저품질 스트림 피기백 : 낮은 해상도 오디오를 여분 정보로 전송

### 인터리빙
- 오디오 청크를 작은 단위로 분할하여 서로 다른 패킷에 분산 배치
- 패킷 손실 시에도 원본 청크의 대부분 보존 가능

<br>

## Skype 시스템
### P2P 구조
- 클라이언트들이 직접 연결하여 VoIP 통화
- 슈퍼노드(SN)들이 오버레이 네트워크 형성하여 클라이언트 위치 추적
- NAT 환경에서는 슈퍼노드가 릴레이 역할 수행